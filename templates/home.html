<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jesus Youth Neyyattinkara Zone</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/home_style.css') }}">
    <style>
        .ministry-card-container {
            margin-bottom: 20px;
        }

        .ministry-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            border-radius: 15px;
            overflow: hidden;
        }

        .ministry-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .ministry-card .card-body {
            text-align: center;
            padding: 2rem;
            cursor: pointer;
        }

        .contact-list {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 0 0 15px 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .contact-list.show {
            max-height: 1000px; /* Adjust this value as needed */
            transition: max-height 0.5s ease-in;
        }

        .contact-list ul {
            list-style-type: none;
            padding: 10px;
            margin: 0;
        }

        .contact-list li {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
        }

        .contact-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #fff;
            transition: transform 0.3s ease;
        }

        .contact-photo:hover {
            transform: scale(1.2);
        }

        .contact-info {
            display: flex;
            flex-direction: column;
        }

        .contact-name {
            font-weight: bold;
            font-size: 1.1em;
            color: var(--text-color);
        }

        .contact-role {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .contact-icons {
            display: flex;
            gap: 10px;
        }

        .social-icon {
            color: var(--primary-color);
            font-size: 1.2em;
            transition: color 0.3s ease;
        }

        .social-icon:hover {
            color: var(--secondary-color);
        }

        .fab {
            font-size: 1.2em;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">JY Neyyattinkara</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#ministries">Ministries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#conference">Ahava 2024</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="bg-primary text-white text-center py-5">
        <div class="container">
            <h1 class="display-4">Jesus Youth Neyyattinkara Zone</h1>
            <p class="lead">Jesus Youth is an international Catholic movement that challenges young people to live a meaningful, creative and fulfilling life.</p>
        </div>
    </header>



    <section id="conference" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Ahava 2024 - Youth Conference</h2>

            <div class="row align-items-center">
                <div class="col-md-6">
                    <img src="{{ url_for('static', filename='images/conference.jpg') }}" alt="Ahava 2024"
                        class="img-fluid rounded shadow">
                </div>
                <div class="col-md-6">
                    <p class="lead">Join us for <strong>Ahava 2024</strong>, an exciting youth conference that will take
                        place from <strong>December 26 to 29, 2024</strong>. Experience days of prayer, learning, and
                        spiritual rejuvenation with fellow young believers.</p>
                    <div class="countdown-container text-center my-4">
                        <h3 class="mb-3">Countdown to Ahava 2024</h3>
                        <div class="countdown-timer">
                            <span id="countdown-days" class="countdown-number">{{ days_until_conference }}</span>
                            <span class="countdown-label">days</span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center mt-4">
                        <a href="/pray-for-ahava" class="btn btn-outline-primary me-3">Pray for Ahava</a>
                        <a href="upi://pay?pa=pradeepmariadeniston@okicici&pn=Pradeep&cu=INR&tn=donated via JY Neyyattinkara website" 
                        class="btn btn-outline-primary me-3">Donate ❤️</a>
			 <a href="https://forms.gle/y1PK1AaEhBnwgzKR6" target="_blank"
                            class="btn btn-primary me-3">Register Now</a>

                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div id="gallery-container">
                {% for image in images %}
                <img src="{{ url_for('static', filename='gallery/' + image) }}" alt="Gallery Image">
                {% endfor %}
            </div>
        </div>


        </div>
    </section>


    <!-- JavaScript to enable carousel navigation and dynamic height -->
    <script>
        // Function to scroll the gallery left
        function scrollLeft() {
            document.getElementById('gallery-container').scrollBy({ left: -320, behavior: 'smooth' });
        }

        // Function to scroll the gallery right
        function scrollRight() {
            document.getElementById('gallery-container').scrollBy({ left: 300, behavior: 'smooth' });
        }

        // Adjust the height of the gallery to the tallest image (with a max of 200px)
        function adjustGalleryHeight() {
            const images = document.querySelectorAll('#gallery-container img');
            let maxHeight = 0;

            images.forEach(image => {
                const imgHeight = image.naturalHeight; // Get the actual height of the image
                if (imgHeight > maxHeight) {
                    maxHeight = imgHeight;
                }
            });

            // Set the height of the gallery container, but no more than 200px
            const galleryFrame = document.getElementById('gallery-frame');
            galleryFrame.style.height = Math.min(maxHeight, 500) + 'px';
        }

        // Ensure images are fully loaded before adjusting height
        window.addEventListener('load', adjustGalleryHeight);
        
    function toggleContactList(container, event) {
        event.stopPropagation();
        const contactList = container.querySelector('.contact-list');
        contactList.classList.toggle('show');
    }

    function getInitials(name) {
        return name.split(' ').map(word => word[0]).join('').toUpperCase();
    }

    document.addEventListener('DOMContentLoaded', function() {
        const contactPhotos = document.querySelectorAll('.contact-photo');
        contactPhotos.forEach(photo => {
            if (!photo.getAttribute('src')) {
                const name = photo.getAttribute('alt');
                photo.textContent = getInitials(name);
            }
        });
    });

    </script>


    <section id="ministries" class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Our Ministries</h2>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
            {% for ministry_name, members in ministry_groups.items() %}
            <div class="col">
                <div class="ministry-card-container">
                    <div class="card h-100 ministry-card">
                        <div class="card-body" onclick="toggleContactList(this.closest('.ministry-card-container'), event)">
                            <i class="{{ ministry_icons.get(ministry_name, 'fas fa-users') }} fa-3x mb-3 primary-color"></i>
                            <h3 class="card-title">{{ ministry_name }}</h3>
                            <p class="card-text">{{ members[0].ministry_description }}</p>
                        </div>
                    </div>
                    <div class="contact-list">
                        <ul>
                            {% for member in members %}
                            <li>
                                <div class="contact-photo">
                                    <img src="{{ url_for('static', filename=member.profile_pic) }}" alt="{{ member.contact_name }}" 
                                    onerror="this.style.display='none'; this.parentNode.textContent='{{ member.contact_name[:2].upper() }}';"
                                    style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                                </div>
                                <div class="contact-info">  
                                    <span class="contact-name">{{ member.contact_name }}</span>
                                    <span class="contact-role">{{ member.contact_role }}</span>
                                    <span class="formation-status">{{ member.formation_status }}</span>
                                    <div class="contact-icons">
                                        {% if member.whatsapp is not none %}
                                        <a href="{{ member.whatsapp }}" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                                        {% endif %}
                                        {% if member.instagram is not none %}
                                        <a href="{{ member.instagram }}" class="social-icon"><i class="fab fa-instagram"></i></a>
                                        {% endif %}
                                    </div>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

</body>
</html>
